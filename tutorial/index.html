<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="description" content="nehan.js document">
    <meta name="keywords" content="nehan.js,nehan,javascript">
    <title>nehan.js doc - Tutorial</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.css">
<link rel="stylesheet" href="../static/semantic/semantic.min.css">
<link rel="stylesheet" href="../static/css/main.css">
<link rel="stylesheet" href="../static/css/nehan.css">

    <meta name="generator" content="nanoc 3.8.0">
  </head>
  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-399060-28', 'auto');
  ga('send', 'pageview');

</script>

    <header class="global-header">
  <div class="inner">
    <a class="logo" href="../index.html">nehan.js</a>
    <nav class="global-nav">
      <ul>
	<li><a class="current" href="../tutorial">Tutorial</a></li>
	<li><a href="http://tb.antiscroll.com/static/nehan-demo/">Demo</a></li>
	<!--
	<li><a href="http://tb.antiscroll.com/static/editor/">Playground</a></li>
	-->
	<li><a href="http://tb.antiscroll.com/static/nehan-api/">API</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="ui error icon legacy-browser-alert message" style="display:none">
  <i class="warning sign icon"></i>
  <div class="content">
    <div class="header">未対応のブラウザ</div>
    <p>当サイトはお使いのブラウザに対応していません。より新しいブラウザでアクセスして下さい。</p>
  </div>
</div>

    <main class="global-main">
      <div class="inner">
	<h1>Tutorial</h1>

<h2>Install</h2>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-markup">&lt;link rel="stylesheet" href="/path/to/nehan.css"&gt;
&lt;script type="text/javascript" src="/path/to/nehan.js"&gt;&lt;/script&gt;</code></pre></div></div></div>

<h2>Getting Started</h2>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="keyword">var</span> target = document.querySelector(<span class="string"><span class="delimiter">"</span><span class="content">#result</span><span class="delimiter">"</span></span>);

<span class="keyword">new</span> Nehan.Document()
  .setStyles({
    <span class="key"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>:{
      <span class="key">flow</span>:<span class="string"><span class="delimiter">"</span><span class="content">lr-tb</span><span class="delimiter">"</span></span>, <span class="comment">// or "tb-rl"</span>
      <span class="key">fontSize</span>:<span class="integer">16</span>,
      <span class="key">width</span>:<span class="integer">640</span>, <span class="comment">// page width</span>
      <span class="key">height</span>:<span class="integer">480</span> <span class="comment">// page height</span>
    },
    <span class="key"><span class="delimiter">"</span><span class="content">p.line</span><span class="delimiter">"</span></span>:{
      <span class="key">margin</span>:{<span class="key">after</span>:<span class="string"><span class="delimiter">"</span><span class="content">1em</span><span class="delimiter">"</span></span>} <span class="comment">// use 'logical' property!!</span>
    }
  })
  .setContent([
    <span class="string"><span class="delimiter">"</span><span class="content">&lt;p class='line'&gt;hello, nehan.js!!&lt;/p&gt;</span><span class="delimiter">"</span></span>
  ].join(<span class="string"><span class="delimiter">"</span><span class="char">\n</span><span class="delimiter">"</span></span>))
  .render({
    <span class="comment">// called for each page output.</span>
    <span class="function">onPage</span>: <span class="keyword">function</span>(page, ctx){
      console.log(<span class="string"><span class="delimiter">"</span><span class="content">onPage:%o</span><span class="delimiter">"</span></span>, page);
      <span class="comment">// append generated page</span>
      target.appendChild(page.element);
    },
    <span class="function">onComplete</span>: <span class="keyword">function</span>(time, ctx){
      <span class="comment">// parsing complete, now you can get outline(toc) element.</span>
      <span class="keyword">var</span> outline = ctx.createOutlineElement({
        <span class="function">onClickLink</span>:<span class="keyword">function</span>(toc, evt){
          console.log(<span class="string"><span class="delimiter">"</span><span class="content">click %o</span><span class="delimiter">"</span></span>, toc);
        }
      });
      console.log(<span class="string"><span class="delimiter">"</span><span class="content">finished! %fmsec</span><span class="delimiter">"</span></span>, time);
    }
  });</code></pre></div></div></div>

<h2>About Styling</h2>

<p>Selector of nehan.js is something different from standard one.</p>

<p>Because nehan.js is <strong>LOGICAL</strong> layout engine, you must use <strong>LOGICAL</strong> property in various situations.</p>

<p>For example, you must use <code>margin-start</code> instead of <code>margin-left</code> for horizontal left margin.</p>

<p>For more information about logical property, see <a href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/#abstract-box">CSS Writing Modes Module Level3 - Abstract box dimemsions</a>.</p>

<h2>Functional Css Value</h2>

<p>In nehan.js, all css values are parsed in js layer, so you can define functional css value like this.</p>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">doc.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">.example2</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">background-color</span><span class="delimiter">"</span></span>:<span class="keyword">function</span>(ctx){
     <span class="keyword">if</span>(ctx.getChildIndex() % <span class="integer">2</span> === <span class="integer">0</span>){
       <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">blue</span><span class="delimiter">"</span></span>;
     } <span class="keyword">else</span> {
       <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">red</span><span class="delimiter">"</span></span>;
     }
  }
});</code></pre></div></div></div>

<p>Type of <code>ctx</code> is <a href="http://tb.antiscroll.com/static/nehan-api/Nehan.SelectorContext.html">SelectorContext</a>.</p>

<h2>Global Style</h2>

<p>You can set global style by <code>Nehan.setStyle</code>.</p>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">Nehan.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">h1</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">font-size</span><span class="delimiter">"</span></span>:<span class="string"><span class="delimiter">"</span><span class="content">3em</span><span class="delimiter">"</span></span>
});</code></pre></div></div></div>

<h2>Selector Callback</h2>

<p>Using <code>onload</code> property, you can change markup dynamically before parsing.</p>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">doc.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">.time</span><span class="delimiter">"</span></span>, {
  <span class="function">onload</span>:<span class="keyword">function</span>(context){
     <span class="keyword">var</span> markup = context.getMarkup();
     <span class="keyword">var</span> now = <span class="keyword">new</span> Date().toDateString();

     <span class="comment">// dynamically rewrite markup content.</span>
     markup.setContent([
       <span class="string"><span class="delimiter">"</span><span class="content">&lt;p&gt;You have visited this page at &lt;time&gt;</span><span class="delimiter">"</span></span> + now + <span class="string"><span class="delimiter">"</span><span class="content">&lt;/time&gt;&lt;/p&gt;</span><span class="delimiter">"</span></span>,
       markup.getContent()
     ].join(<span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>));
  }
});</code></pre></div></div></div>

<h2>DOM Generation Callback</h2>

<p>By using <code>oncreate</code> property, you can hook just after the target selector is converted into DOM.</p>

<div class="code-container"><div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">doc.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>, {
  <span class="function">oncreate</span>:<span class="keyword">function</span>(context){
    <span class="comment">// console.log("abstract logical tree:%o", context.box);</span>
    <span class="predefined">$</span>(context.dom).click(<span class="keyword">function</span>(){
       alert(<span class="string"><span class="delimiter">"</span><span class="content">click p!</span><span class="delimiter">"</span></span>);
    });
  }
});</code></pre></div></div></div>

<p>Type of <code>ctx</code> is <a href="http://tb.antiscroll.com/static/nehan-api/Nehan.DomCreateContext.html">DomCreateContext</a>.</p>

      </div>
    </main>
    <script type="text/x-template" id="tmpl-reader">
  <div class="pager">
    <button class="ui {{leftButtonColor}} left icon button"
	    v-on="click:onClickLeft">&larr; {{{ leftButtonLabel }}}</button>
    <div class="progress"><span class="page-no" v-text="pageNo"></span> of <span class="page-count" v-text="pageCount"></span></div>
    <button class="ui {{rightButtonColor}} right icon button"
	    v-on="click:onClickRight">{{{ rightButtonLabel }}} &rarr;</button>
    <div class="ui icon buttons">
      <button v-class="green:!isVert()" class="ui popup-enabled button" v-on="click:onClickHori" data-content="horizontal"><i class="align left icon"></i> Horizontal</button>
      <div class="or"></div>
      <button v-class="green:isVert()" class="ui popup-enabled button" v-on="click:onClickVert" data-content="vertical"><i class="rotated align left icon"></i> Vertical</button>
    </div>
  </div>
  <div class="screen" v-el="screen"></div>
  <div class="outline" v-el="outline"></div>
</script>

    <div class="global-footer">
</div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/vue/0.11.3/vue.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
<script type="text/javascript" src="../static/semantic/semantic.min.js"></script>
<script type="text/javascript" src="../static/js/nehan.min.js"></script>
<!--script type="text/javascript" src="../static/js/nehan.js"></script-->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript" src="../static/js/nehan.math.js"></script>
<script type="text/javascript" src="../static/js/main.min.js"></script>
<!--script type="text/javascript" src="../static/js/main.js"></script-->

  </body>
</html>
